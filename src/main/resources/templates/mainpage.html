<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/mainpage.css}">
    <link rel="stylesheet" th:href="@{/header.css}">
    <link rel="stylesheet" th:href="@{/footer.css}">
    <link rel="stylesheet" th:href="@{/category.css}">

    <style>
        .page-wrapper {
            width: 1100px;
            margin: 0 auto;
            padding: 0 16px;
        }
    </style>
</head>
<body>
<div class="header-wrapper">
    <!-- κ³µν†µ ν—¤λ” -->
    <div th:replace="~{main-fragments/header :: header}"></div>

    <!-- κ³µν†µ μΉ΄ν…κ³ λ¦¬ -->
    <div th:replace="~{main-fragments/category :: category}"></div>

</div>


<!-- λ©”μΈνμ΄μ§€ λ³Έλ¬Έ μ‹μ‘ -->
<div class="main page-wrapper">
    <!--λ°°λ„ μΉ΄ν…κ³ λ¦¬-->
    <div th:replace="~{main-fragments/banner :: banner}"></div>
    <h2 class="text02xk fibt-semibold mb-4">μ¤λμ μƒν’ μ¶”μ²</h2>
    <div class="main-wrapper">
        <div class="main-content" th:each="i : ${items}">
            <a th:href="@{ '/detail/' + ${i.id} }" style="text-decoration: none">
                <div class="content-image">
                    <img th:if="${!i.images.isEmpty()}" th:src="${i.images[0].url}" width="300" height="300">
                    <img th:if="${i.images.isEmpty()}" src="https://placehold.co/300x300" width="300" height="300">
                </div>
                <div class="content-info">
                    <h4 th:text="${i.title}">λ°”μ§€</h4>
                    <p th:text="${#numbers.formatInteger(i.price, 3, 'COMMA')} + 'μ›'">100λ§μ›</p>
                    <p th:text="${i.brand}">λΈλλ“</p>

                    <!--                        λ©”μΈνμ΄μ§€μ—μ„ μ‚­μ λ” κ΄€λ¦¬μ κ¶ν•μΌλ΅ λ„κΈ°κ³ -->
                    <!--                        μƒμ„Ένμ΄μ§€μ—μ„λ§ μ μ €κ°€ μ‚­μ ν•  μ μλ„λ΅ λ§λ“μ…-->
                    <!--                        μΏΌλ¦¬ μ¤νΈλ§ ν•μ‹μΌλ΅ λ³΄λƒ„-->
                    <!--                        <span th:onclick="fetch('/item?id=[[${i.id}]]', { method : 'DELETE' })-->
                    <!--                            .then(r => r.text())-->
                    <!--                            .then(() => {-->
                    <!--                                location.reload();-->
                    <!--                            })-->
                    <!--                        ">π—‘οΈ</span>-->


                    <!--                        JSON ν•μ‹μΌλ΅ λ³΄λƒ„-->
                    <span th:onclick="deleteItem([[${i.id}]])" sec:authorize="isAuthenticated()">π—‘οΈ</span>
                    <script>
                        function deleteItem(itemId) {
                            fetch('/item', {
                                method : 'DELETE',
                                headers : { 'Content-Type' : 'application/json' },
                                body : JSON.stringify({ id: itemId })
                            })
                            .then(r => r.text())
                            .then(() => {
                                location.reload();
                            })
                        }
                    </script>

                </div>
            </a>
        </div>

    </div>
</div>

<!-- κ³µν†µ ν‘Έν„° -->
<div class="footer-wrapper">
    <div th:replace="~{main-fragments/footer :: footer}"></div>
</div>
</body>
</html>